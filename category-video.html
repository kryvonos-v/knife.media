<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <title>Журнал «Нож» &#8212; Оружие интеллектуала</title>

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.7.1/slick.min.css"/>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="dist/styles/app.css" />
</head>
<body>
<div id="siteWrapper" class="site-wrapper">

<header class="header" id="header">
  <div class="container header__inner navbar navbar-expand-lg">
    <div class="header__mobile-group">
    <div id="menuBurger" class="burger header__burger" data-toggle="collapse" data-target="#mainNav" aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
      <div class="burger__stick"></div>
      <div class="burger__stick"></div>
      <div class="burger__stick"></div>
    </div>

    <a href="/" class="logo mx-auto header__logo">
      <img class="logo__img" width="100" src="src/assets/imgs/logo.svg" alt="Site logo">
    </a>

    <a id="mobileSearchBtn" href="#" class="header__mobile-search-btn search-btn">
      <img class="search-btn__search-icon" src="src/assets/imgs/icons/search.svg" />
      <svg width="18px" class="search-btn__close-icon" x="0px" y="0px" viewBox="0 0 20 20">
        <path d="M11.4,10l8.2-8.2c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0L10,8.6L1.7,0.3c-0.4-0.4-1-0.4-1.4,0
                 s-0.4,1,0,1.4L8.6,10l-8.3,8.3c-0.4,0.4-0.4,1,0,1.4s1,0.4,1.4,0l8.3-8.3l8.3,8.3c0.4,0.4,1,0.4,1.4,0s0.4-1,0-1.4L11.4,10z"/>
      </svg>
    </a>
  </div>

    <nav class="header__nav collapse navbar-collapse" id="mainNav">
    <ul class="menu sm header__menu" id="mainMenu">
      <li class="menu__item">
        <a class="menu__link" href="#">Россия</a>
        </li>
      <li class="menu__item">
        <a class="menu__link" href="#">Тесты</a>
        </li>
      <li class="menu__item">
        <a class="menu__link" href="#">Секс</a>
        </li>
      <li class="menu__item">
        <a class="menu__link" href="#">Мнения</a>
        </li>
      <li class="menu__item">
        <a class="menu__link" href="#">Stories</a>
        </li>
      <li class="menu__item">
        <a class="menu__link" href="#">Больше ></a>
        <ul class="submenu">
          <li class="submenu__item">
            <a class="submenu__link">Кино</a>
          </li>
          <li class="submenu__item">
            <a class="submenu__link">Музыка</a>
          </li>
          <li class="submenu__item submenu__item_active">
            <a class="submenu__link">Нищегоды</a>
          </li>
          <li class="submenu__item">
            <a class="submenu__link">Еда</a>
          </li>
          <li class="submenu__item">
            <a class="submenu__link">Персонажи</a>
          </li>
          <li class="submenu__item">
            <a class="submenu__link">Неизвестная Россия</a>
          </li>
          <li class="submenu__item">
            <a class="submenu__link">Фотографии</a>
          </li>
          <li class="submenu__item">
            <a class="submenu__link">Личный опыт</a>
          </li>
          <li class="submenu__item">
            <a class="submenu__link">Итервью</a>
          </li>
          <li class="submenu__item">
            <a class="submenu__link">Классика</a>
          </li>
        </ul>
      </li>
    </ul>

    <div class="socials header__socials">
      <ul class="socials__list">
        <li class="socials__item">
          <a href="#" class="socials__link brand-link header__socials-link"><i class="fa fa-facebook socials__fb" aria-hidden="true"></i></a>
        </li>
        <li class="socials__item">
          <a href="#" class="socials__link brand-link header__socials-link"><i class="fa fa-vk socials__vk" aria-hidden="true"></i></a>
        </li>
        <li class="socials__item">
          <a href="#" class="socials__link brand-link header__socials-link"><i class="fa fa-telegram socials__tg" aria-hidden="true"></i></a>
        </li>
        <li class="socials__item">
          <a href="#" class="socials__link brand-link header__socials-link"><i class="fa fa-twitter socials__tw" aria-hidden="true"></i></a>
        </li>
        <li class="socials__item">
          <a id="searchBtn" href="#" class="socials__link brand-link header__socials-link header__search-btn search-btn">
            <i class="fa fa-search search-btn__search-icon" aria-hidden="true"></i>
            <i class="fa fa-times search-btn__close-icon" aria-hidden="true"></i>
          </a>
        </li>
      </ul>
    </div>
  </nav>
  </div>
</header>

<main style="overflow: hidden;">
  <div class="container px-0">
    <h1 class="title title--margins title--category">
      <span class="gt-md g-md-sunglow-to-mandy">Видео</span>
    </h1>
  </div>

  <div class="container px-0">
    <div class="grid grid--small-gaps grid--lg-modules">

      <div class="grid__item col-12 col-md-6 height-fix">
        <article class="module module--large flex-auto">
          <a href="#" class="label module__label">Блог</a>

          <div class="module__img-link">
            <div class="module__img" style="background-image: url('src/assets/imgs/photos/category-video-1.jpg');"></div>
            <img class="module__img-height-fix" src="src/assets/imgs/photos/category-video-1.jpg" />
          </div>

          <div class="module__content">
            <h2 class="module__heading">
              <a href="#" class="brand-link"><span class="c-primary">Антон Кораблев:</span> Кто выбирает работпуски — путешествия без отрыва от карьеры</a>
            </h2>

            <footer class="content-info content-info--large module__content-info">
              <a class="content-info__item" href="#">Таня Коэн</a>
              <span class="content-info__separator">•</span>
              <time class="content-info__item" datetime="">12 июля</time>
            </footer>
          </div>
        </article>
      </div>

      <div class="grid__item col-12 col-md-6 height-fix">
        <article class="module module--large flex-auto">
          <a href="#" class="label module__label">Гид</a>

          <div class="module__img-link">
            <div class="module__img" style="background-image: url('src/assets/imgs/photos/category-video-2.jpg');"></div>
            <img class="module__img-height-fix" src="src/assets/imgs/photos/category-video-2.jpg" />
          </div>

          <div class="module__content">
            <h2 class="module__heading">
              <a href="#" class="brand-link"><span class="c-primary">Петр Иванов:</span> Девять признаков того, что вы никогда не разбогатеете</a>
            </h2>

            <footer class="content-info content-info--large module__content-info">
              <a class="content-info__item" href="#">Кэтлин Элкнис</a>
              <span class="content-info__separator">•</span>
              <time class="content-info__item" datetime="">12 июля</time>
            </footer>
          </div>
        </article>
      </div>

      <div class="grid__item col-12 col-md-6 height-fix">
        <article class="module module--large flex-auto">
          <a href="#" class="label module__label">Наука</a>

          <div class="module__img-link">
            <div class="module__img" style="background-image: url('src/assets/imgs/photos/category-video-3.jpg');"></div>
            <img class="module__img-height-fix" src="src/assets/imgs/photos/category-video-3.jpg" />
          </div>

          <div class="module__content">
            <h2 class="module__heading">
              <a href="#" class="brand-link"><span class="c-primary">Игорь Соколовский:</span> Что на самом деле отличает гуманитарные науки от естественных</a>
            </h2>

            <footer class="content-info content-info--large module__content-info">
              <a class="content-info__item" href="#">Таня Коэн</a>
              <span class="content-info__separator">•</span>
              <time class="content-info__item" datetime="">12 июля</time>
            </footer>
          </div>
        </article>
      </div>

      <div class="grid__item col-12 col-md-6 height-fix">
        <article class="module module--large flex-auto">
          <a href="#" class="label module__label">Блог</a>

          <div class="module__img-link">
            <div class="module__img" style="background-image: url('src/assets/imgs/photos/category-video-4.jpg');"></div>
            <img class="module__img-height-fix" src="src/assets/imgs/photos/category-video-4.jpg" />
          </div>

          <div class="module__content">
            <h2 class="module__heading">
              <a href="#" class="brand-link"><span class="c-primary">Big Belarussian Boss Show:</span> Что такое <em>сверхчувствительность</em> и как с ней жить</a>
            </h2>

            <footer class="content-info content-info--large module__content-info">
              <a class="content-info__item" href="#">Кэтлин Элкнис</a>
              <span class="content-info__separator">•</span>
              <time class="content-info__item" datetime="">12 июля</time>
            </footer>
          </div>
        </article>
      </div>

      <div class="grid__item col-12 col-md-6 height-fix">
        <article class="module module--large flex-auto">
          <a href="#" class="label module__label">Путишествия</a>

          <div class="module__img-link">
            <div class="module__img" style="background-image: url('src/assets/imgs/photos/category-video-5.jpg');"></div>
            <img class="module__img-height-fix" src="src/assets/imgs/photos/category-video-5.jpg" />
          </div>

          <div class="module__content">
            <h2 class="module__heading">
              <a href="#" class="brand-link"><span class="c-primary">Гоген Солнцев:</span> Как объехать всю Скандинавию за 250 евро</a>
            </h2>

            <footer class="content-info content-info--large module__content-info">
              <a class="content-info__item" href="#">Агата Коровина</a>
              <span class="content-info__separator">•</span>
              <time class="content-info__item" datetime="">11 июля</time>
            </footer>
          </div>
        </article>
      </div>

      <div class="grid__item col-12 col-md-6 height-fix">
        <article class="module module--large flex-auto">
          <a href="#" class="label module__label">Наука</a>

          <div class="module__img-link">
            <div class="module__img" style="background-image: url('src/assets/imgs/photos/category-video-6.jpg');"></div>
            <img class="module__img-height-fix" src="src/assets/imgs/photos/category-video-6.jpg" />
          </div>

          <div class="module__content">
            <h2 class="module__heading">
              <a href="#" class="brand-link"><span class="c-primary">Далай Лама:</span> Как медитация покорила ученых</a>
            </h2>

            <footer class="content-info content-info--large module__content-info">
              <a class="content-info__item" href="#">Кэтлин Элкнис</a>
              <span class="content-info__separator">•</span>
              <time class="content-info__item" datetime="">11 июля</time>
            </footer>
          </div>
        </article>
      </div>

      <div class="grid__item col-12 col-md-6 height-fix">
        <article class="module module--large flex-auto">
          <a href="#" class="label module__label">Блоги</a>

          <div class="module__img-link">
            <div class="module__img" style="background-image: url('src/assets/imgs/photos/category-video-7.jpg');"></div>
            <img class="module__img-height-fix" src="src/assets/imgs/photos/category-video-7.jpg" />
          </div>

          <div class="module__content">
            <h2 class="module__heading">
              <a href="#" class="brand-link"><span class="c-primary">Антон Кораблев:</span> Кто выбирает <em>работпуски</em> — путешествия без отрыва от карьеры</a>
            </h2>

            <footer class="content-info content-info--large module__content-info">
              <a class="content-info__item" href="#">Агата Коровина</a>
              <span class="content-info__separator">•</span>
              <time class="content-info__item" datetime="">10 июля</time>
            </footer>
          </div>
        </article>
      </div>

      <div class="grid__item col-12 col-md-6 height-fix">
        <article class="module module--large flex-auto">
          <a href="#" class="label module__label">Гид</a>

          <div class="module__img-link">
            <div class="module__img" style="background-image: url('src/assets/imgs/photos/category-video-8.jpg');"></div>
            <img class="module__img-height-fix" src="src/assets/imgs/photos/category-video-8.jpg" />
          </div>

          <div class="module__content">
            <h2 class="module__heading">
              <a href="#" class="brand-link"><span class="c-primary">Степан Карма:</span> Девять признаков того, что вы никогда не разбогатеете</a>
            </h2>

            <footer class="content-info content-info--large module__content-info">
              <a class="content-info__item" href="#">Кэтлин Элкнис</a>
              <span class="content-info__separator">•</span>
              <time class="content-info__item" datetime="">10 июля</time>
            </footer>
          </div>
        </article>
      </div>

      <div class="grid__item col-12 col-md-6 height-fix">
        <article class="module module--large flex-auto">
          <a href="#" class="label module__label">Наука</a>

          <div class="module__img-link">
            <div class="module__img" style="background-image: url('src/assets/imgs/photos/category-video-9.jpg');"></div>
            <img class="module__img-height-fix" src="src/assets/imgs/photos/category-video-9.jpg" />
          </div>

          <div class="module__content">
            <h2 class="module__heading">
              <a href="#" class="brand-link"><span class="c-primary">Егор Михайлов:</span> Что на самом деле отличает гуманитарные науки от естественных</a>
            </h2>

            <footer class="content-info content-info--large module__content-info">
              <a class="content-info__item" href="#">Агата Коровина</a>
              <span class="content-info__separator">•</span>
              <time class="content-info__item" datetime="">10 июля</time>
            </footer>
          </div>
        </article>
      </div>

      <div class="grid__item col-12 col-md-6 height-fix">
        <article class="module module--large flex-auto">
          <a href="#" class="label module__label">Блоги</a>

          <div class="module__img-link">
            <div class="module__img" style="background-image: url('src/assets/imgs/photos/category-video-10.jpg');"></div>
            <img class="module__img-height-fix" src="src/assets/imgs/photos/category-video-10.jpg" />
          </div>

          <div class="module__content">
            <h2 class="module__heading">
              <a href="#" class="brand-link"><span class="c-primary">Игорь Беликов:</span> Что такое сверхчувствительностьи как с ней ходить в кино</a>
            </h2>

            <footer class="content-info content-info--large module__content-info">
              <a class="content-info__item" href="#">Кэтлин Элкнис</a>
              <span class="content-info__separator">•</span>
              <time class="content-info__item" datetime="">9 июля</time>
            </footer>
          </div>
        </article>
      </div>

      <div class="grid__item col-12 col-md-6 height-fix">
        <article class="module module--large flex-auto">
          <a href="#" class="label module__label">Путишествия</a>

          <div class="module__img-link">
            <div class="module__img" style="background-image: url('src/assets/imgs/photos/category-video-12.jpg');"></div>
            <img class="module__img-height-fix" src="src/assets/imgs/photos/category-video-12.jpg" />
          </div>

          <div class="module__content">
            <h2 class="module__heading">
              <a href="#" class="brand-link"><span class="c-primary">Карина Абдусаламова:</span> Как объехать всю Скандинавию</a>
            </h2>

            <footer class="content-info content-info--large module__content-info">
              <a class="content-info__item" href="#">Карина Абдусаламова </a>
              <span class="content-info__separator">•</span>
              <time class="content-info__item" datetime="">9 июля</time>
            </footer>
          </div>
        </article>
      </div>

      <div class="grid__item col-12 col-md-6 height-fix">
        <article class="module module--large flex-auto">
          <a href="#" class="label module__label">Наука</a>

          <div class="module__img-link">
            <div class="module__img" style="background-image: url('src/assets/imgs/photos/category-video-13.jpg');"></div>
            <img class="module__img-height-fix" src="src/assets/imgs/photos/category-video-13.jpg" />
          </div>

          <div class="module__content">
            <h2 class="module__heading">
              <a href="#" class="brand-link"><span class="c-primary">Антон Кораблев:</span> Как медитация покорила ученых</a>
            </h2>

            <footer class="content-info content-info--large module__content-info">
              <a class="content-info__item" href="#">Кэтлин Элкнис</a>
              <span class="content-info__separator">•</span>
              <time class="content-info__item" datetime="">8 июля</time>
            </footer>
          </div>
        </article>
      </div>

      <div class="grid__item col-12 col-md-6 height-fix">
        <article class="module module--large flex-auto">
          <a href="#" class="label module__label">Наука</a>

          <div class="module__img-link">
            <div class="module__img" style="background-image: url('src/assets/imgs/photos/category-video-14.jpg');"></div>
            <img class="module__img-height-fix" src="src/assets/imgs/photos/category-video-14.jpg" />
          </div>

          <div class="module__content">
            <h2 class="module__heading">
              <a href="#" class="brand-link"><span class="c-primary">Олег Соболев:</span> Что на самом деле отличает гуманитарные науки от естественных</a>
            </h2>

            <footer class="content-info content-info--large module__content-info">
              <a class="content-info__item" href="#">Агата Коровина</a>
              <span class="content-info__separator">•</span>
              <time class="content-info__item" datetime="">8 июля</time>
            </footer>
          </div>
        </article>
      </div>

      <div class="grid__item col-12 col-md-6 height-fix">
        <article class="module module--large flex-auto">
          <a href="#" class="label module__label">Блоги</a>

          <div class="module__img-link">
            <div class="module__img" style="background-image: url('src/assets/imgs/photos/category-video-15.jpg');"></div>
            <img class="module__img-height-fix" src="src/assets/imgs/photos/category-video-15.jpg" />
          </div>

          <div class="module__content">
            <h2 class="module__heading">
              <a href="#" class="brand-link"><span class="c-primary">Антон Кораблев:</span> Что такое усталость и как с ней жить</a>
            </h2>

            <footer class="content-info content-info--large module__content-info">
              <a class="content-info__item" href="#">Кэтлин Элкнис</a>
              <span class="content-info__separator">•</span>
              <time class="content-info__item" datetime="">8 июля</time>
            </footer>
          </div>
        </article>
      </div>

      <div class="grid__item col-12 col-md-6 height-fix">
        <article class="module module--large flex-auto">
          <a href="#" class="label module__label">Путишествия</a>

          <div class="module__img-link">
            <div class="module__img" style="background-image: url('src/assets/imgs/photos/category-video-16.jpg');"></div>
            <img class="module__img-height-fix" src="src/assets/imgs/photos/category-video-16.jpg" />
          </div>

          <div class="module__content">
            <h2 class="module__heading">
              <a href="#" class="brand-link"><span class="c-primary">Сергей Шитов:</span> Как объехать всю Скандинавию за 250 евро</a>
            </h2>

            <footer class="content-info content-info--large module__content-info">
              <a class="content-info__item" href="#">Карина Абдусаламова </a>
              <span class="content-info__separator">•</span>
              <time class="content-info__item" datetime="">6 июля</time>
            </footer>
          </div>
        </article>
      </div>

      <div class="grid__item col-12 col-md-6 height-fix">
        <article class="module module--large flex-auto">
          <a href="#" class="label module__label">Наука</a>

          <div class="module__img-link">
            <div class="module__img" style="background-image: url('src/assets/imgs/photos/category-video-1.jpg');"></div>
            <img class="module__img-height-fix" src="src/assets/imgs/photos/category-video-1.jpg" />
          </div>

          <div class="module__content">
            <h2 class="module__heading">
              <a href="#" class="brand-link"><span class="c-primary">Борис Грачевский:</span> Как медитация покорила ученых</a>
            </h2>

            <footer class="content-info content-info--large module__content-info">
              <a class="content-info__item" href="#">Кэтлин Элкнис</a>
              <span class="content-info__separator">•</span>
              <time class="content-info__item" datetime="">5 июля</time>
            </footer>
          </div>
        </article>
      </div>

    </div>

    <button class="load-more-btn mt-4">Больше видео</button>
  </div>
</main>

<footer class="footer mt-3">
  <div class="footer__inner container">
    <div class="row">
      <div class="col-12 col-lg footer__brand">
        <a href="/" class="footer__logo">НОЖ</a>
        <p class="footer__subheading">Интеллектуальный журнал<br>о культуре и обществе</p>
      </div>

      <div class="col-12 col-lg footer__nav">
        <ul class="nav footer__menu flex-column font-weight-bold">
          <li class="nav-item"><a class="footer__nav-link" href="#">О нас</a></li>
          <li class="nav-item"><a class="footer__nav-link" href="#">Реклама</a></li>
          <li class="nav-item"><a class="footer__nav-link" href="#">Вакансии</a></li>
          <li class="nav-item"><a class="footer__nav-link" href="#">Стать частью проекта</a></li>
        </ul>

        <ul class="socials socials--theme-light footer__socials mt-4">
          <li class="socials__item">
            <a href="#" class="socials__link brand-link"><i class="fa fa-facebook socials__fb" aria-hidden="true"></i></a>
          </li>
          <li class="socials__item">
            <a href="#" class="socials__link brand-link"><i class="fa fa-vk socials__vk" aria-hidden="true"></i></a>
          </li>
          <li class="socials__item">
            <a href="#" class="socials__link brand-link"><i class="fa fa-telegram socials__tg" aria-hidden="true"></i></a>
          </li>
          <li class="socials__item">
            <a href="#" class="socials__link brand-link"><i class="fa fa-twitter socials__tw" aria-hidden="true"></i></a>
          </li>
          <li class="socials__item">
            <a href="#" class="socials__link brand-link"><i class="fa fa-search socials__search" aria-hidden="true"></i></a>
          </li>
        </ul>
      </div>

      <div class="col-12 col-lg-5 footer__text">
        <p>Использование всех текстовых материалов без изменений в некоммерческих целях разрешается со ссылкой на «Нож». Все аудиовизуальные произведения являются собственностью своих авторов и правообладателей и используются только в образовательных и информационных целях. Если вы являетесь собственником того или иного произведения и не согласны с его размещением на нашем сайте, пожалуйста, напишите на <a class="footer__link" href="mailto:hi@knife.media">hi@knife.media</a></p>
        <p>Сайт может содержать контент, не предназначенный для лиц младше 18 лет</p>
      </div>
    </div>
  </div>
</footer>
<!-- End of site wrapper -->
<div>

<script type="text/template" id="searchTemplate">
  <div id="search" class="search hidden">
    <div class="search__inner">
      <div class="search__input-wrapper content-container">
        <input id="searchInput" placeholder="Поиск ..." type="text" class="search-input h2 h1-lg search__input" />
      </div>

      <span id="searchLoading" class="search__loading search__text-info hidden content-container font-italic">Загрузка...</span>
      <span id="searchNoResults" class="search__no-results search__text-info hidden content-container text-uppercase">Извините, но ничего не найдено.</span>
      <span id="searchError" class="search__error search__text-info hidden content-container text-uppercase">Произошла ошибка. Повторите попытку позже.</span>
      <div id="searchResults" class="search__results content-container"></div>
    </div>
  </div>
</script>

<script type="text/template" id="searchNewsTemplate">

  <% items.forEach(function (item, newsIndex) { %>

  <article class="search-news">
    <div class="search-news__content">
      <h2 class="search-news__heading h2 h1-lg"><a href="<%-item.link%>" class="brand-link"><%= item.title %></a></h2>

      <% if (item.tags && item.tags.length) { %>
        <footer class="content-info search-news__content-info text-uppercase c-white">
          <% item.tags.forEach(function (tag, tagIndex) { %>

            <% if (tagIndex !== 0) { %>
              <span class="content-info__separator">•</span>
            <% } %>

            <% if (tag.link) { %>
              <a class="content-info__item brand-link" href="<%- tag.link %>"><%- tag.name %></a>
            <% } else { %>
              <span class="content-info__item"><%- tag.name %></a>
            <% } %>

          <% }) %>
        </footer>
      <% } %>
    </div>

    <% if (item.img) { %>
      <a
        href="#"
        class="img-link search-news__img search-news__img-link search__result-img"
        style="background-image: url('<%- item.img %>');">
        <img class="out-of-page" src="<%- item.img %>">
      </a>
    <% } %>
  </article>

  <span class="hr search__separator"></span>
  <% }) %>

</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
<script src="./node_modules/jquery/dist/jquery.min.js"></script>
<script src="https://getbootstrap.com/assets/js/vendor/popper.min.js"></script>
<script src="./node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="./node_modules/smartmenus/dist/jquery.smartmenus.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.7.1/slick.min.js"></script>
<script src="static/app.js"></script>

<!-- Script for embedding YouTube video -->
<script>
// 2. This code loads the IFrame Player API code asynchronously.
var tag = document.createElement('script')
var $mediaNewsMediaControl = $('#mediaNewsMediaControl')

tag.src = "https://www.youtube.com/iframe_api"
var firstScriptTag = document.getElementsByTagName('script')[0]
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag)

// 3. This function creates an <iframe> (and YouTube player)
//    after the API code downloads.
var player = null

function onYouTubeIframeAPIReady() {
  player = new YT.Player('mediaNewsVideoPlayer', {
    height: '390',
    width: '640',
    videoId: '0JhtnSYOJYI',
    events: {
      'onReady': onPlayerReady,
      'onStateChange': onPlayerStateChange
    }
  })
}

// 4. The API will call this function when the video player is ready.
function onPlayerReady(event) {
  $mediaNewsMediaControl.click(onMediaControlClick)
}

// 5. The API calls this function when the player's state changes.
//    The function indicates that when playing a video (state=1),
//    the player should play for six seconds and then stop.
var done = false
function onPlayerStateChange(event) {
  // if (event.data == YT.PlayerState.PLAYING && !done) {
  //   setTimeout(stopVideo, 6000)
  //   done = true
  // }
}

function stopVideo() {
  player.stopVideo()
}

function onMediaControlClick (event) {
  if (!player) return

  $mediaNewsMediaControl.closest('.media-news').addClass('media-news--in-action')
  player.playVideo()
}
</script>

<script>
var breakpoints = {
  xs: 0,
  sm: 576,
  md: 768,
  lg: 992,
  xl: 1200
}

$(function() {
  var $stories = $('#stories')

  $stories.on('init', slickEventHandler)
  $stories.on('afterChange', slickEventHandler)
  $stories.on('beforeChange', slickEventHandler)
  $stories.on('breakpoint', slickEventHandler)
  $stories.on('destroy', slickEventHandler)
  $stories.on('reInit', slickEventHandler)
  $stories.on('setPosition', slickEventHandler)
  $stories.on('lazyLoaded', slickEventHandler)

  $stories.slick({
    centerMode: true,
    appendArrows: null,
    infinite: true,
    slidesToShow: 3,
    slidesToScroll: 1,
    responsive: [
      {
        breakpoint: breakpoints.lg,
        settings: {
          arrows: false,
          centerMode: false,
          slidesToShow: 2
        }
      },
      {
        breakpoint: breakpoints.sm,
        settings: {
          arrows: false,
          centerMode: true,
          centerPadding: '40px',
          slidesToShow: 1
        }
      }
    ]
  });

  function slickEventHandler (event, slick, direction) {
    if (event.type === 'destroy') {
      removeSlickSlidesHeight(slick)
    } else {
      makeSlickSlidesFitToParentHeight(slick)
    }
  }

  function makeSlickSlidesFitToParentHeight (slick) {
    // Reseting height each slide.
    removeSlickSlidesHeight(slick)

    var containerHeight = slick.$slideTrack.outerHeight()

    getSlickSlides(slick).css('height', containerHeight + 'px');
  }

  function removeSlickSlidesHeight (slick) {
    getSlickSlides(slick).css('height', '')
  }

  function getSlickSlides (slick) {
    return slick.$list.find('.slick-slide')
  }
})

$(function() {
  var $window = $(window)
  var $mainNav = $('#mainNav')
  var $mainMenu = $('#mainMenu')
  var $firstBigModule = $('#firstBigModule')

  !function init () {
    onWindowResize()
    $window.resize(onWindowResize)
  }()

  function onWindowResize (event) {
    firstBigModuleAdjustCssClasses()
  }

  function firstBigModuleAdjustCssClasses () {
    const windowWidth = $window.outerWidth()
    const classes = 'module--full-img module--wide'

    if (windowWidth >= breakpoints.xl) {
      $firstBigModule.addClass(classes)
    } else {
      $firstBigModule.removeClass(classes)
    }
  }

  $mainMenu.smartmenus({
    // subMenusMinWidth: '400px',
    // subMenusMaxWidth: 'none'
  })

  $mainNav.on('show.bs.collapse', function (e) {
    $('#menuBurger').addClass('burger--active')
  })

  $mainNav.on('hide.bs.collapse', function (e) {
    $('#menuBurger').removeClass('burger--active')
  })
})

// Search module
$(function() {
  var $window = $(window)
  var $body = $('body')
  var $siteWrapper = $('#siteWrapper')
  var $header = $('#header')
  var $mobileSearchBtn = $('#mobileSearchBtn')
  var $searchBtn = $('#searchBtn')
  var $search = null
  var $searchInput = null
  var $searchResults = null
  var $searchLoading = null
  var $searchError = null
  var $searchNoResults = null
  var $searchTemplate = $('#searchTemplate')
  var $searchNewsTemplate = $('#searchNewsTemplate')

  var isShown = false
  var timerId = null
  // Defines delay that should be taken between any two requests for search results.
  // We do this to prevent making of a lot of requests to server.
  var debounceDelay = 300
  var SEARCH_ENDPOINT = 'static/search-results.json'

  // Templates for search and search results (search news).
  var searchTemplate = _.template($searchTemplate.html())
  var searchNewsTemplate = _.template($searchNewsTemplate.html())

  // CSS' classes constants.
  var NOSCROLL_CLASS = 'noscroll'
  var HEADER_SEARCH_ACTIVE_CLASS = 'header--search-active'
  var SEARCH_BTN_ACTIVE_CLASS = 'search-btn--active'
  var HIDDEN_CLASS = 'hidden'

  var debouncedLoadAndProcessData = null

  !function init () {
    initButtonsEventHandlers()
  }()

  function initSearch () {
    // Renders search template
    render()

    $searchInput = $('#searchInput')
    $searchResults = $('#searchResults')
    $searchLoading = $('#searchLoading')
    $searchError = $('#searchError')
    $searchNoResults = $('#searchNoResults')

    initSearchInputEventHanlers()
  }

  function initButtonsEventHandlers () {
    $searchBtn.click(searchBtnClickHandler)
    $mobileSearchBtn.click(searchBtnClickHandler)
  }

  function initSearchInputEventHanlers () {
    if ($searchInput === null) throw new Error('Search input is not rendered yet.')

    debouncedLoadAndProcessData = _.debounce(loadAndProcessData, debounceDelay)

    $searchInput.on('input', searchInputEventHandler)
  }

  function searchInputEventHandler (event) {
    // Removed previous search results.
    $searchResults.html('')

    // Shows text of loading.
    $searchLoading.removeClass(HIDDEN_CLASS)
    // Hides texts for 'no results' and for 'error'.
    $searchNoResults.addClass(HIDDEN_CLASS)
    $searchError.addClass(HIDDEN_CLASS)

    debouncedLoadAndProcessData(event.target.value)
  }

  function searchBtnClickHandler (event) {
    // Renders search if it is not rendered yet.
    // Creates search on demand.
    if ($search === null) {
      initSearch()
    }

    if (isShown) {
      $siteWrapper.removeClass(NOSCROLL_CLASS)
      $header.removeClass(HEADER_SEARCH_ACTIVE_CLASS)
      $mobileSearchBtn.removeClass(SEARCH_BTN_ACTIVE_CLASS)
      $searchBtn.removeClass(SEARCH_BTN_ACTIVE_CLASS)
    } else {
      scrollToTop()
      $siteWrapper.addClass(NOSCROLL_CLASS)
      $header.addClass(HEADER_SEARCH_ACTIVE_CLASS)
      $mobileSearchBtn.addClass(SEARCH_BTN_ACTIVE_CLASS)
      $searchBtn.addClass(SEARCH_BTN_ACTIVE_CLASS)
    }

    toggleSearchVisibility()
  }

  function loadAndProcessData (inputValue) {
    $.get(SEARCH_ENDPOINT, { term: inputValue })
      .done(function (data) {
        if (!data.length) {
          $searchNoResults.removeClass(HIDDEN_CLASS)
        }

        var html = searchNewsTemplate({ items: data })

        $searchResults.html(html)
      })
      .fail(function (error) {
        $searchError.removeClass(HIDDEN_CLASS)
      })
      .always(function () {
        $searchLoading.addClass(HIDDEN_CLASS)
      })
  }

  function render () {
    $search = $($.parseHTML(searchTemplate()))

    $siteWrapper.append($search)
  }

  function scrollToTop () {
    window.scrollTo(0, 0)
  }

  function toggleSearchVisibility () {
    if ($search === null) throw new Error('Search is not rendered yet.')

    if (isShown) {
      $search.addClass(HIDDEN_CLASS)
      isShown = false
    } else {
      $search.removeClass(HIDDEN_CLASS)
      isShown = true
    }
  }
})
</script>
</body>
</html>
